<!DOCTYPE html>
<html>

<head>
	<link rel="stylesheet" type="text/css" href="style/style.css">
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>PUBS</title>
	<script src="vue.js"></script>
</head>

<body>
	<div id="app">

		<div class='window'></div>
		<div class='window'></div>
		<div class='window'></div>
		<div class='window'></div>

		<div v-if="status.eventsLoaded == false" class="modal loading-screen">
			<div class="modal-content">
				<h1>{{messages.eventMessage}}</h1>
			</div>
		</div>

		<div class="modal invisible">
			<div class="modal-content">
				<p></p>
			</div>
		</div>

		<table>
			<thead>
				<tr>
					<th>Class</th>
					<th>Date</th>
					<th>Total</th>
				</tr>
			</thead>
			<tr is="product-listing" v-for='listing in processed_listings' :listing='listing' :key='listing.listing_key' @set-booking="setCurrentListing">
		</table>


		<button type="button" @click="toggleActive('signInActive')">Sign in</button>

		<transition name="fade">
			<div class="modal visible-block" v-if="status.signInActive">
				<div class="modal-content">
					<div class="modal-header">
						<span class="exit" @click="toggleActive('signInActive')">&times</span>
						<p>Sign in</p>	
					</div>
					<form>
						<table>
							<tr>
								<td><label>Username</label></td>
								<td><input class="modal-input" type="text" v-model="customer.auth.username"/></td>
							</tr>
							<tr>
								<td><label>Password</label></td>
								<td><input class="modal-input" type="password" v-model="customer.auth.password"/></td>
							</tr>
							<tr>
								<td>
									<input type="submit" @click.prevent="authUser"/>
								</td>
								<td :class="{'eventSuccess': status.eventSuccess, 'eventFail': status.eventFailure}">{{ messages.eventMessage }}</td>
							</tr>
						</table>
					</form>
				</div>
			</div>
		</transition>

		<form v-if="status.classDetailsActive">
			<fieldset>
				<legend>Class Details</legend>
				<table>
					<tr v-for="textOption in currentListing.textOptions">
						<td v-if="textOption.required" required></td>
						<td v-else></td>

					</tr>
					<tr v-for="choiceOption in currentListing.choiceOptions">

					</tr>
				</table>
			</fieldset>
		</form>

		<form>
			<fieldset>
				<legend>Your Details</legend>
				<table>
					<tr>
						<td>
							<label>First name: </label>
						</td>
						<td>
							<input type="text" v-model="customer.data.firstName" required/>
						</td>
						<td><label>Last name: </label></td>
						<td><input type="text" v-model="customer.data.lastName" required/></td>
					</tr>
					<tr>
						<td>
							<label>Email: </label>
						</td>
						<td>
							<input type="email" v-model="customer.data.emailAddress" required>
						</td>
						<td>
							<input type="checkbox" id="checkbox" checked>
						</td>
						<td>
							<label for="checkbox">Subscribe to our newsletter</label>
						</td>
					</tr>
					<tr>
						<td>
							<label>Phone: </label>
						</td>
						<td>
							<input type="tel" v-model="customer.data.phoneNumbers[0].number">
						</td>
					</tr>
					<tr>
						<td>
							<p>*Pickup authorizations:</p></p>
						</td>
						<td colspan=3>
							<p>Please list the name and cell phone numbers of all adults who may pick your child up</p>
						</td>
					</tr>
					
					<tr>
						<td colspan=4 align="right">
							<textarea class="textinput" rows="5"></textarea>
						</td>
					</tr>
					<tr>
						<td>
							<p>*Emergency Contact:</p>
						</td>
						<td colspan=4>
							<p>Please enter two emergency contacts with phone numbers (apart from pick up authorizations)</p>
						</td>
					</tr>
					<tr>
						<td colspan=4 align="right">
							<textarea class="textinput" rows="5"> </textarea>
						</td>
					</tr>
					<tr>
						<td><p>How did you hear about this:</p></td>
						<td colspan=4><p>How did you hear about this class?</p></td>
					</tr>
					<tr>
						<td colspan=4 align="right">
							<textarea class="textinput" rows=1></textarea>
						</td>
					</tr>
				</table>
			</fieldset>
		</form>

		<h1>Participants</h1>
		<button type="button" @click="addChildParticipant">Add Child</button>

		<form v-for="child in childParticipants" :key="child.key">
			<fieldset>
				<legend>Child {{child.key}} </legend>
				<span class="exit" @click="deleteChildParticipant(child.key - 1)">&times</span>
				<table>
					<tbody>
						<tr>
							<td>
								<label>First Name:</label>
							</td>
							<td>
								<input type="text" v-model="child.data.firstName" required/>
							</td>
							<td>
								<label>Last Name:</label>
							</td>
							<td>
								<input type="text" v-model="child.data.lastName" required/>
							</td>
						</tr>
						<tr>
							<td>
								Gender:
							</td>
							<td>
								<select>
									<option>Male</option>
									<option>Female</option>
									<option selected disabled>---</option>
								</select>
							</td>
						</tr>
						<tr>
							<td>
								<label>Date of Birth:</label>
							</td>
							<td>
								<input type="date" required>
							</td>
						</tr>
						<tr>
							<td>School:</td>
							<td>
								 <input type="text" required>
							</td>
							<td>
								Grade:
							</td>
							<td>
								<select required>
									<option selected disabled>-- Please Select an Option --</option>
									<option>1</option>
									<option>2</option>
									<option>3</option>
									<option>4</option>
									<option>5</option>
									<option>6</option>
									<option>7</option>
									<option>8</option>
									<option>K</option>
								</select>
							</td>
						</tr>
					</tbody>
				</table>
			</fieldset>
		</form>

		<form>
			<fieldset>
				<legend>Password</legend>
				<table>
					<tbody>
						<tr>
							<td><label>Password:</label></td>
							<td><input type="password" required></input></td>
						</tr>
						<tr>
							<td><label>Confirm Password:</label></td>
							<td><input type="password" required/></td>
						</tr>
					</tbody>
				</table>
			</fieldset>
		</form>
	</div>
	<script src="pubs_dist.js"></script>
	<script src="app.js" defer></script>
</body>

</html>